<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>I2U2 Cosmic Ray eLab api by onlineth</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">I2U2 Cosmic Ray eLab api</h1>
      <h2 class="project-tagline">A simple way to search and retrieve data from the world&#39;s largest Cosmic Ray Database</h2>
      <a href="https://github.com/onlineth/Cosmic-eLab-API" class="btn">View on GitHub</a>
      <a href="https://github.com/onlineth/Cosmic-eLab-API/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/onlineth/Cosmic-eLab-API/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="cosmic-ray-elab-api-v1" class="anchor" href="#cosmic-ray-elab-api-v1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cosmic Ray eLab API v1</h1>

<h3>
<a id="thomas-hein" class="anchor" href="#thomas-hein" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thomas Hein</h3>

<hr>

<p>This is an API written for the Cosmic Ray eLab to provied an easier way of searching and downloading data files.</p>

<h2>
<a id="setup" class="anchor" href="#setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setup</h2>

<ol>
<li>Rename the <code>config.sample.php</code> file and change it <code>config.php</code>
</li>
<li>Set the $data_location variable to the correct location of the data directory</li>
<li>Set the database credentials to their appropriate values</li>
<li>Execute the createTables.sql in your database to create the table for the API</li>
<li>Run the buildFileDatabase.php in your browser. Note: This process may take time and you may have to increase php's <a href="https://php.net/manual/en/info.configuration.php#ini.max-execution-time">max execution time</a> located in your php.ini file - when this completes, you should see a message displaying the number of files added to the table without any errors</li>
</ol>

<h1>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to use</h1>

<p>This API uses the JSON format on returning information regarless of the informaion (with the execption of downloading files and really big errors on the server's end). Each part of the API uses this basic structure:</p>

<pre><code>{
request: {
    pass: "true"
},
main: {
    searchfiles: "true"
}
</code></pre>

<p>Always check if <code>pass</code> in the <code>request</code> object is true. If it is not, there will be a message after <code>pass</code> displaying an error.</p>

<p>Every part of this API uses the GET method. For example, a request for searching files may look like this: <code>/v1/searchfiles.php?detectorid=6147&amp;year=2010&amp;startmonthday=0415&amp;endmonthday=1208</code>.</p>

<h2>
<a id="searchfilesphp" class="anchor" href="#searchfilesphp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SearchFiles.php</h2>

<p>Used to find files given on specific parameters</p>

<h3>
<a id="parameters" class="anchor" href="#parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parameters</h3>

<h4>
<a id="required" class="anchor" href="#required" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Required</h4>

<ul>
<li>
<code>detectorid</code> - A four digit code that's unique to every detector, example <code>6147</code>.</li>
<li>
<code>year</code> - Must be one year at a time, example <code>2010</code>.</li>
</ul>

<p>Either one Month and Day:</p>

<ul>
<li>
<code>monthday</code> - A four digit number where the first two digits represent the month and the last two represent the day, example <code>0204</code>
</li>
</ul>

<p>Or a range of months/days</p>

<ul>
<li>
<code>startmonthday</code> - The first monthday to include in the range</li>
<li>
<code>endmonthday</code> - The last monthday to include in the range</li>
</ul>

<h4>
<a id="optional-parameters" class="anchor" href="#optional-parameters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Optional parameters</h4>

<ul>
<li>
<code>index</code> - Only look for specific indexes of a data file</li>
<li>
<code>filetype</code> - Only look for specific file types</li>
</ul>

<p>Commone file types include:</p>

<ul>
<li>raw - Note: Raw is not .raw but for example <code>6179.2008.0313.3</code>
</li>
<li>thresh</li>
<li>bless</li>
<li>analyze</li>
<li>geo</li>
</ul>

<h3>
<a id="example-response" class="anchor" href="#example-response" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example response</h3>

<pre><code>{
    request: {
        pass: "true"
    },
    main: {
        searchfiles: "true"
    },
    filelist: [
        {
            fileid: "4604",
            detectorid: "6147",
            year: "2010",
            monthday: "415",
            index: "0",
            filetype: "raw "
        },
        {
            fileid: "4605",
            detectorid: "6147",
            year: "2010",
            monthday: "415",
            index: "0",
            filetype: "thresh "
        }
    ],
    numberOfFiles: 2,
    limit: 500
}
</code></pre>

<h2>
<a id="checkfilephp" class="anchor" href="#checkfilephp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CheckFile.php</h2>

<p>Used to check a file before downloading it. The purpose is to verify it's on the file system before then going to the getfile.php script. If you just performed a recent searchfiles.php query, this probably isn't needed.</p>

<h3>
<a id="parameters-1" class="anchor" href="#parameters-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parameters</h3>

<h4>
<a id="required-1" class="anchor" href="#required-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Required</h4>

<ul>
<li>
<code>detectorid</code> - A four digit code that's unique to every detector, example <code>6147</code>
</li>
<li>
<code>year</code> - Must be one year at a time, example <code>2010</code>
</li>
<li>
<code>monthday</code> - A four digit number where the first two digits represent the month and the last two represent the day, example <code>0204</code>
</li>
<li>
<code>index</code> - A specific index of a file, example <code>0</code>
</li>
<li>
<code>filetype</code> - The file type of the file, example <code>thresh</code>
</li>
</ul>

<p>Or</p>

<ul>
<li>
<code>fileid</code> - given from a searchfiles.php query, this is just a more convenient way of downloading the file</li>
</ul>

<h3>
<a id="example-response-1" class="anchor" href="#example-response-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example Response</h3>

<pre><code>{
    request: {
        pass: "true"
    },
    main: {
        filefound: "true"
    }
}
</code></pre>

<h2>
<a id="getfilephp" class="anchor" href="#getfilephp" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>GetFile.php</h2>

<p>This script will allow you to download a given file provided it's unquie parameters. This file has been created so it allows you to download the data file keeping it's filename intact.</p>

<h3>
<a id="parameters-2" class="anchor" href="#parameters-2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Parameters</h3>

<ul>
<li>
<code>detectorid</code> - A four digit code that's unique to every detector, example <code>6147</code>
</li>
<li>
<code>year</code> - Must be one year at a time, example <code>2010</code>
</li>
<li>
<code>monthday</code> - A four digit number where the first two digits represent the month and the last two represent the day, example <code>0204</code>
</li>
<li>
<code>index</code> - A specific index of a file, example <code>0</code>
</li>
<li>
<code>filetype</code> - The file type of the file, example <code>thresh</code>
</li>
</ul>

<p>Or</p>

<ul>
<li>
<code>fileid</code> - given from a searchfiles.php query, this is just a more convenient way of downloading the file</li>
</ul>

<h1>
<a id="issues--feature-requests" class="anchor" href="#issues--feature-requests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Issues &amp; Feature Requests</h1>

<p>Submit an issue or a feature request <a href="https://github.com/onlineth/Cosmic-eLab-API/issues">here</a>. Also, feel free to fork, improve, and submit a pull request if you'd like help out on this project.</p>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<p><a href="https://github.com/onlineth/Cosmic-eLab-API/blob/master/LICENSE">Licensed under the GNU AFFERO GENERAL PUBLIC LICENSE</a></p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/onlineth/Cosmic-eLab-API">I2U2 Cosmic Ray eLab api</a> is maintained by <a href="https://github.com/onlineth">onlineth</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
